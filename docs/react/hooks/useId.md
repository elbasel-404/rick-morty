# useId

`useId` is a React Hook for generating unique IDs that can be passed to accessibility attributes.

## Syntax

```tsx
const id = useId();
```

## Reference

### Parameters

`useId` does not take any parameters.

### Returns

`useId` returns a unique ID string associated with this particular `useId` call in this particular component.

## Usage

### Generating Unique IDs for Accessibility Attributes

Call `useId` at the top level of your component to generate a unique ID:

```tsx
import { useId } from "react";

function PasswordField() {
  const passwordHintId = useId();

  return (
    <>
      <label>
        Password:
        <input type="password" aria-describedby={passwordHintId} />
      </label>
      <p id={passwordHintId}>
        The password should contain at least 18 characters
      </p>
    </>
  );
}
```

**Why this is useful:**

HTML accessibility attributes like `aria-describedby` let you specify that two tags are related. However, hardcoding IDs is not good practice in React because a component may be rendered multiple timesâ€”but IDs must be unique!

### Multiple Instances Example

```tsx
export default function App() {
  return (
    <>
      <h2>Choose password</h2>
      <PasswordField />
      <h2>Confirm password</h2>
      <PasswordField />
    </>
  );
}
```

Even though `PasswordField` appears multiple times, the generated IDs won't clash.

### Generating IDs for Several Related Elements

If you need to give IDs to multiple related elements, call `useId` to generate a shared prefix:

```tsx
import { useId } from "react";

function Form() {
  const id = useId();

  return (
    <form>
      <label htmlFor={id + "-firstName"}>First Name:</label>
      <input id={id + "-firstName"} type="text" />

      <label htmlFor={id + "-lastName"}>Last Name:</label>
      <input id={id + "-lastName"} type="text" />
    </form>
  );
}
```

## Why useId is Better Than an Incrementing Counter

You might wonder why `useId` is better than incrementing a global variable like `nextId++`.

**Key benefit:** `useId` guarantees that it works with server rendering.

During server rendering, your components generate HTML output. Later, on the client, hydration attaches event handlers to the generated HTML. For hydration to work, the client output must match the server HTML.

With an incrementing counter, this is very difficult because:

- The order in which client components are hydrated might not match the order in which server HTML was emitted
- `useId` generates IDs that ensure the server and client outputs will match

## Specifying a Shared Prefix for All Generated IDs

If you render multiple independent React apps on a single page, pass `identifierPrefix` as an option to your `createRoot` or `hydrateRoot` calls:

```tsx
import { createRoot } from "react-dom/client";

const root1 = createRoot(document.getElementById("root1"), {
  identifierPrefix: "my-first-app-",
});
root1.render(<App />);

const root2 = createRoot(document.getElementById("root2"), {
  identifierPrefix: "my-second-app-",
});
root2.render(<App />);
```

This ensures that IDs generated by the two apps never clash.

## Caveats

- **Hook rules apply**: `useId` is a Hook, so you can only call it at the top level of your component or your own Hooks. You can't call it inside loops or conditions. If you need that, extract a new component and move the state into it.

- **Not for list keys**: `useId` should **not** be used to generate keys in a list. Keys should be generated from your data.

- **Server rendering requirement**: With server rendering, `useId` requires an identical component tree on the server and the client. If the trees don't match exactly, the generated IDs won't match.

- **Async Server Components**: `useId` currently cannot be used in async Server Components.

## Common Pitfalls

### âŒ Don't Use for List Keys

```tsx
// ðŸš© Wrong - don't use useId for keys
function List({ items }) {
  return items.map((item) => {
    const id = useId(); // Breaks Hook rules!
    return <div key={id}>{item}</div>;
  });
}
```

### âœ… Generate Keys from Data

```tsx
// âœ… Correct - use data for keys
function List({ items }) {
  return items.map((item) => <div key={item.id}>{item.name}</div>);
}
```

## Related

- [Accessibility Attributes](../concepts/accessibility.md) - Using ARIA attributes
- [Server Rendering](../server/server-components.md) - Rendering on the server
- [Hydration](../concepts/hydration.md) - Attaching client behavior to server HTML
